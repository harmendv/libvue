import{o as e}from"./index.b84cf581.js";import{_ as l,I as s,c as a,a as t,r as i,f as o,J as n,t as c,F as d,k as p,i as r,j as h,w as u,d as v,l as b,s as m,n as y,o as _,b as f,K as k,v as V,g as w}from"./index.7cfd2803.js";import{p as x}from"./propSizeMixin.c60c30ad.js";import"./index.03596c51.js";const g={provide(){return{value:s((()=>this.value)),multiple:s((()=>this.multiple)),searchable:s((()=>this.searchable)),clearable:s((()=>this.clearable)),searchValue:s((()=>this.search)),visibleOptions:s((()=>this.visibleOptions))}},mixins:[x()],props:{value:{type:[Object,Array],default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"Choose an option"},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},teleportTarget:{type:String,default:"body"}},data:()=>({dropdownVisible:!1,focusedOptionIndex:null,search:null,visibleOptions:null,mounted:!1}),computed:{focusTrapOptions:()=>({immediate:!0,escapeDeactivates:!1,fallbackFocus:document.body}),hasValue(){return!!(this.multiple&&this.value.length>0)||!(this.multiple||!this.value)},classObject(){return{[`lv-select--size-${this.size}`]:!0,"lv-select--disabled":!!this.disabled||!!this.loading,"lv-select--loading":!!this.loading}}},watch:{search(e){!this.dropdownVisible&&e&&(this.dropdownVisible=!0)},value(e){!this.multiple&&this.dropdownVisible&&(this.dropdownVisible=!1),e&&this.search&&(this.search=null)}},mounted(){this.mounted=!0,this.visibleOptions=this.getVisibleOptions(),e(this.$refs.select,(()=>{this.dropdownVisible=!1}))},updated(){this.$nextTick((()=>{this.visibleOptions=this.getVisibleOptions()}))},methods:{getVisibleOptions(){return this.$el.querySelectorAll(".lv-select-option").length},onClickSelection(){this.dropdownVisible=!this.dropdownVisible},onEscape(){this.dropdownVisible=!1}}},O=["aria-expanded"],S={key:0,class:"lv-select__value"},j=["placeholder"],C={key:2,class:"lv-select__placeholder"},$={key:1,class:"lv-select__value"},B=["placeholder"],z={key:2,class:"lv-select__placeholder"},E={class:"lv-select__dropdown",role:"listbox"},K={key:0,class:"lv-select__no-options"};const T=l(g,[["render",function(e,l,s,x,g,T){const A=w("lv-icon");return _(),a("div",{ref:"select",class:y(["lv-select",T.classObject]),role:"combobox","aria-expanded":g.dropdownVisible,"aria-haspopup":"listbox",onKeydown:l[4]||(l[4]=u(((...e)=>T.onEscape&&T.onEscape(...e)),["esc"]))},[t("div",{ref:"combobox",class:"lv-select__input",tabindex:"0",onClick:l[2]||(l[2]=(...e)=>T.onClickSelection&&T.onClickSelection(...e)),onKeydown:l[3]||(l[3]=u(k(((...e)=>T.onClickSelection&&T.onClickSelection(...e)),["prevent"]),["enter","space"]))},[s.multiple?s.multiple?(_(),a("div",$,[T.hasValue?(_(!0),a(d,{key:0},p(s.value,((l,t)=>(_(),a("span",{key:t,class:"lv-select__value-item"},[i(e.$slots,"value",{values:s.value,value:l},(()=>[f(c(l.label),1)]))])))),128)):s.searchable?o((_(),a("input",{key:1,"onUpdate:modelValue":l[1]||(l[1]=e=>g.search=e),class:"lv-select__search",type:"text",placeholder:s.placeholder},null,8,B)),[[n,g.search]]):(_(),a("div",z,c(s.placeholder),1))])):r("",!0):(_(),a("div",S,[T.hasValue?i(e.$slots,"value",{key:0,value:s.value},(()=>[f(c(s.value.label),1)])):s.searchable?o((_(),a("input",{key:1,"onUpdate:modelValue":l[0]||(l[0]=e=>g.search=e),class:"lv-select__search",type:"text",placeholder:s.placeholder},null,8,j)),[[n,g.search]]):(_(),a("div",C,c(s.placeholder),1))])),s.loading?(_(),h(A,{key:2,class:"lv-select__loading",name:"loader-2"})):(_(),h(A,{key:3,class:"lv-select__icon",name:"chevron-down"}))],544),v(m,{name:"dropdown"},{default:b((()=>[o(t("div",E,[i(e.$slots,"default"),g.visibleOptions?r("",!0):(_(),a("div",K,"No options found"))],512),[[V,g.dropdownVisible]])])),_:3})],42,O)}]]);export{T as default};
