import{o as y}from"./index.627471ab.js";import{_ as k,O as c,o as l,c as t,a as v,z as d,t as u,P as p,y as r,F as V,r as w,d as _,f as b,I as x,b as g,s as O,J as S,N as C,A as B,e as N,v as f,D as z}from"./index.6cba6d7e.js";import{p as T}from"./propSizeMixin.5f872152.js";import"./index.b22ac8ae.js";const j={provide(){return{value:c(()=>this.value),multiple:c(()=>this.multiple),searchable:c(()=>this.searchable),searchValue:c(()=>this.search),visibleOptions:c(()=>this.visibleOptions)}},mixins:[T()],props:{value:{type:[Object,Array],default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"Choose an option"},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{dropdownVisible:!1,focusedOptionIndex:null,search:null,visibleOptions:null}},computed:{hasValue(){return!!(this.multiple&&this.value.length>0||!this.multiple&&this.value)},classObject(){return{[`lv-select--size-${this.size}`]:!0,"lv-select--disabled":!!this.disabled||!!this.loading,"lv-select--loading":!!this.loading}}},watch:{search(a){!this.dropdownVisible&&a&&(this.dropdownVisible=!0)},value(a){!this.multiple&&this.dropdownVisible&&(this.dropdownVisible=!1),a&&this.search&&(this.search=null)}},mounted(){this.visibleOptions=this.getVisibleOptions(),y(this.$refs.select,()=>{this.dropdownVisible=!1})},updated(){this.$nextTick(()=>{this.visibleOptions=this.getVisibleOptions()})},methods:{getVisibleOptions(){return this.$el.querySelectorAll(".lv-select-option").length},onClickSelection(){this.dropdownVisible=!this.dropdownVisible}}},A=["aria-expanded"],D={key:0,class:"lv-select__value"},L=["placeholder"],M={key:2,class:"lv-select__placeholder"},F={key:1,class:"lv-select__value"},I=["placeholder"],K={key:2,class:"lv-select__placeholder"},U={class:"lv-select__dropdown",role:"listbox"},q={key:0,class:"lv-select__no-options"};function E(a,i,e,J,o,n){const h=N("lv-icon");return l(),t("div",{ref:"select",class:B(["lv-select",n.classObject]),role:"combobox","aria-expanded":o.dropdownVisible,"aria-haspopup":"listbox"},[v("div",{ref:"combobox",class:"lv-select__input",tabindex:"0",onClick:i[2]||(i[2]=(...s)=>n.onClickSelection&&n.onClickSelection(...s)),onKeydown:i[3]||(i[3]=x(z((...s)=>n.onClickSelection&&n.onClickSelection(...s),["prevent"]),["enter","space"]))},[e.multiple?e.multiple?(l(),t("div",F,[n.hasValue?(l(!0),t(V,{key:0},w(e.value,(s,m)=>(l(),t("span",{key:m,class:"lv-select__value-item"},[d(a.$slots,"value",{values:e.value,value:s},()=>[f(r(s.label),1)])]))),128)):e.searchable?u((l(),t("input",{key:1,"onUpdate:modelValue":i[1]||(i[1]=s=>o.search=s),class:"lv-select__search",type:"text",placeholder:e.placeholder},null,8,I)),[[p,o.search]]):(l(),t("div",K,r(e.placeholder),1))])):_("",!0):(l(),t("div",D,[n.hasValue?d(a.$slots,"value",{key:0,value:e.value},()=>[f(r(e.value.label),1)]):e.searchable?u((l(),t("input",{key:1,"onUpdate:modelValue":i[0]||(i[0]=s=>o.search=s),class:"lv-select__search",type:"text",placeholder:e.placeholder},null,8,L)),[[p,o.search]]):(l(),t("div",M,r(e.placeholder),1))])),e.loading?(l(),b(h,{key:2,class:"lv-select__loading",name:"loader-2"})):(l(),b(h,{key:3,class:"lv-select__icon",name:"chevron-down"}))],544),g(C,{name:"dropdown"},{default:O(()=>[u(v("div",U,[d(a.$slots,"default"),o.visibleOptions?_("",!0):(l(),t("div",q,"No options found"))],512),[[S,o.dropdownVisible]])]),_:3})],10,A)}const R=k(j,[["render",E]]);export{R as default};
