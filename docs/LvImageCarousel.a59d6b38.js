import n from"./LvImageCarouselItem.197b346e.js";import{_ as t,c as e,a as r,r as o,o as i,u}from"./index.7cfd2803.js";function c(n){return"number"==typeof n}function a(n){return"[object Object]"===Object.prototype.toString.call(n)}function s(n){return a(n)||function(n){return Array.isArray(n)}(n)}function f(n){return Math.abs(n)}function l(n){return n?n/f(n):0}function d(n,t){return f(n-t)}function p(n){return g(n).map(Number)}function v(n){return n[m(n)]}function m(n){return Math.max(0,n.length-1)}function g(n){return Object.keys(n)}function x(n,t){return[n,t].reduce((function(n,t){return g(t).forEach((function(e){var r=n[e],o=t[e],i=a(r)&&a(o);n[e]=i?x(r,o):o})),n}),{})}function h(n,t){var e=g(n),r=g(t);return e.length===r.length&&e.every((function(e){var r=n[e],o=t[e];return"function"==typeof r?"".concat(r)==="".concat(o):s(r)&&s(o)?h(r,o):r===o}))}function y(n,t){var e={start:function(){return 0},center:function(n){return r(n)/2},end:r};function r(n){return t-n}return{measure:function(r){return c(n)?t*Number(n):e[n](r)}}}function S(n,t){var e=f(n-t);function r(t){return t<n}function o(n){return n>t}function i(n){return r(n)||o(n)}return{length:e,max:t,min:n,constrain:function(e){return i(e)?r(e)?n:t:e},reachedAny:i,reachedMax:o,reachedMin:r,removeOffset:function(n){return e?n-e*Math.ceil((n-t)/e):n}}}function b(n,t,e){var r=S(0,n),o=r.min,i=r.constrain,u=n+1,c=a(t);function a(n){return e?f((u+n)%u):i(n)}function s(){return c}function l(n){return c=a(n),d}var d={add:function(n){return l(s()+n)},clone:function(){return b(n,s(),e)},get:s,set:l,min:o,max:n};return d}function w(){var n=[];var t={add:function(e,r,o,i){return void 0===i&&(i=!1),e.addEventListener(r,o,i),n.push((function(){return e.removeEventListener(r,o,i)})),t},removeAll:function(){return n=n.filter((function(n){return n()})),t}};return t}function A(n){var t=n;function e(n){return t/=n,o}function r(n){return c(n)?n:n.get()}var o={add:function(n){return t+=r(n),o},divide:e,get:function(){return t},multiply:function(n){return t*=n,o},normalize:function(){return 0!==t&&e(t),o},set:function(n){return t=r(n),o},subtract:function(n){return t-=r(n),o}};return o}function E(n,t,e,r,o,i,u,c,a,s,p,v,m,g,x,h){var y=n.cross,S=["INPUT","SELECT","TEXTAREA"],b=A(0),E=w(),I=w(),M=m.measure(20),B={mouse:300,touch:400},O={mouse:500,touch:600},P=x?5:16,T=0,k=0,L=!1,z=!1,D=!1,C=!1;function N(n){if(!(C="mousedown"===n.type)||0===n.button){var t,u,c=d(r.get(),i.get())>=2,s=C||!c,f=(t=n.target,u=t.nodeName||"",!(S.indexOf(u)>-1)),l=c||C&&f;L=!0,o.pointerDown(n),b.set(r),r.set(i),a.useBaseMass().useSpeed(80),function(){var n=C?document:e;I.add(n,"touchmove",V).add(n,"touchend",j).add(n,"mousemove",V).add(n,"mouseup",j)}(),T=o.readPoint(n),k=o.readPoint(n,y),v.emit("pointerDown"),s&&(D=!1),l&&n.preventDefault()}}function V(n){if(!z&&!C){if(!n.cancelable)return j(n);var e=o.readPoint(n),i=o.readPoint(n,y),c=d(e,T),a=d(i,k);if(!(z=c>a)&&!D)return j(n)}var s=o.pointerMove(n);!D&&s&&(D=!0),u.start(),r.add(t.apply(s)),n.preventDefault()}function j(n){var e=s.byDistance(0,!1).index!==p.get(),i=o.pointerUp(n)*(x?O:B)[C?"mouse":"touch"],u=function(n,t){var e=p.clone().add(-1*l(n)),r=e.get()===p.min||e.get()===p.max,o=s.byDistance(n,!x).distance;return x||f(n)<M?o:!g&&r?.4*o:h&&t?.5*o:s.byIndex(e.get(),0).distance}(t.apply(i),e),m=function(n,t){if(0===n||0===t)return 0;if(f(n)<=f(t))return 0;var e=d(f(n),f(t));return f(e/n)}(i,u),y=d(r.get(),b.get())>=.5,S=e&&m>.75,w=f(i)<M,A=S?10:P,E=S?1+2.5*m:1;y&&!C&&(D=!0),z=!1,L=!1,I.removeAll(),a.useSpeed(w?9:A).useMass(E),c.distance(u,!x),C=!1,v.emit("pointerUp")}function H(n){D&&n.preventDefault()}return{addActivationEvents:function(){var n=e;E.add(n,"touchmove",(function(){})).add(n,"touchend",(function(){})).add(n,"touchstart",N).add(n,"mousedown",N).add(n,"touchcancel",j).add(n,"contextmenu",j).add(n,"click",H)},clickAllowed:function(){return!D},pointerDown:function(){return L},removeAllEvents:function(){E.removeAll(),I.removeAll()}}}function I(n,t,e){var r,o,i=(r=2,o=Math.pow(10,r),function(n){return Math.round(n*o)/o}),u=A(0),c=A(0),a=A(0),s=0,f=t,d=e;function p(n){return f=n,m}function v(n){return d=n,m}var m={direction:function(){return s},seek:function(t){a.set(t).subtract(n);var e,r,o,i,p=(e=a.get(),(o=0)+(e-(r=0))/(100-r)*(f-o));return s=l(a.get()),a.normalize().multiply(p).subtract(u),(i=a).divide(d),c.add(i),m},settle:function(t){var e=t.get()-n.get(),r=!i(e);return r&&n.set(t),r},update:function(){u.add(c),n.add(u),c.multiply(0)},useBaseMass:function(){return v(e)},useBaseSpeed:function(){return p(t)},useMass:v,useSpeed:p};return m}function M(n,t,e,r,o){var i=o.measure(10),u=o.measure(50),c=!1;return{constrain:function(o){if(!c&&n.reachedAny(e.get())&&n.reachedAny(t.get())){var a=n.reachedMin(t.get())?"min":"max",s=f(n[a]-t.get()),l=e.get()-t.get(),d=Math.min(s/u,.85);e.subtract(l*d),!o&&f(l)<i&&(e.set(n.constrain(e.get())),r.useSpeed(10).useMass(3))}},toggleActive:function(n){c=!n}}}function B(n,t,e,r){var o=S(-t+n,e[0]),i=e.map(o.constrain);return{snapsContained:function(){if(t<=n)return[o.max];if("keepSnaps"===r)return i;var e=function(){var n=i[0],t=v(i),e=i.lastIndexOf(n),r=i.indexOf(t)+1;return S(e,r)}(),u=e.min,c=e.max;return i.slice(u,c)}()}}function O(n,t,e,r){var o=S(t.min+.1,t.max+.1),i=o.reachedMin,u=o.reachedMax;return{loop:function(t){if(function(n){return 1===n?u(e.get()):-1===n&&i(e.get())}(t)){var o=n*(-1*t);r.forEach((function(n){return n.add(o)}))}}}}function P(n){var t=n.max,e=n.length;return{get:function(n){return(n-t)/-e}}}function T(n,t,e,r,o){var i=r.reachedAny,u=r.removeOffset,c=r.constrain;function a(n){return n.concat().sort((function(n,t){return f(n)-f(t)}))[0]}function s(t,r){var o=[t,t+e,t-e];return n?a(r?o.filter((function(n){return l(n)===r})):o):o[0]}return{byDistance:function(e,r){var a=o.get()+e,l=function(e){var r=n?u(e):c(e);return{index:t.map((function(n){return n-r})).map((function(n){return s(n,0)})).map((function(n,t){return{diff:n,index:t}})).sort((function(n,t){return f(n.diff)-f(t.diff)}))[0].index,distance:r}}(a),d=l.index,p=l.distance,v=!n&&i(a);return!r||v?{index:d,distance:e}:{index:d,distance:e+s(t[d]-p,0)}},byIndex:function(n,e){return{index:n,distance:s(t[n]-o.get(),e)}},shortcut:s}}function k(n,t,e){var r="x"===n.scroll?function(n){return"translate3d(".concat(n,"px,0px,0px)")}:function(n){return"translate3d(0px,".concat(n,"px,0px)")},o=e.style,i=!1;return{clear:function(){i||(o.transform="",e.getAttribute("style")||e.removeAttribute("style"))},to:function(n){i||(o.transform=r(t.apply(n.get())))},toggleActive:function(n){i=!n}}}function L(n,t,e,r,o,i,u,c,a){var s,f=p(o),l=p(o).reverse(),d=(s=i[0]-1,g(m(l,s),"end")).concat(function(){var n=e-i[0]-1;return g(m(f,n),"start")}());function v(n,t){return n.reduce((function(n,t){return n-o[t]}),t)}function m(n,t){return n.reduce((function(n,e){return v(n,t)>0?n.concat([e]):n}),[])}function g(e,o){var i="start"===o,s=i?-r:r,f=u.findSlideBounds([s]);return e.map((function(e){var o=i?0:-r,u=i?r:0,s=f.filter((function(n){return n.index===e}))[0][i?"end":"start"],l=A(-1),d=A(-1),p=k(n,t,a[e]);return{index:e,location:d,translate:p,target:function(){return l.set(c.get()>s?o:u)}}}))}return{canLoop:function(){return d.every((function(n){var t=n.index;return v(f.filter((function(n){return n!==t})),e)<=.1}))},clear:function(){d.forEach((function(n){return n.translate.clear()}))},loop:function(){d.forEach((function(n){var t=n.target,e=n.translate,r=n.location,o=t();o.get()!==r.get()&&(0===o.get()?e.clear():e.to(o),r.set(o))}))},loopPoints:d}}function z(n,t,e,r,o,i,u){var c=o.removeOffset,a=o.constrain,s=i?[0,t,-t]:[0],f=l(s,u);function l(t,o){var i=t||s,u=function(n){var t=n||0;return e.map((function(n){return S(.5,n-.5).constrain(n*t)}))}(o);return i.reduce((function(t,o){var i=r.map((function(t,r){return{start:t-e[r]+u[r]+o,end:t+n-u[r]+o,index:r}}));return t.concat(i)}),[])}return{check:function(n,t){var e=i?c(n):a(n);return(t||f).reduce((function(n,t){var r=t.index,o=t.start,i=t.end;return!(-1!==n.indexOf(r))&&(o<e&&i>e)?n.concat([r]):n}),[])},findSlideBounds:l}}function D(n,t,e){var r=c(e);return{groupSlides:function(o){return r?function(n,t){return p(n).filter((function(n){return n%t==0})).map((function(e){return n.slice(e,e+t)}))}(o,e):function(e){return p(e).reduce((function(e,r){var o=t.slice(v(e),r+1).reduce((function(n,t){return n+t}),0);return!r||o>n?e.concat(r):e}),[]).map((function(n,t,r){return e.slice(n,r[t+1])}))}(o)}}}function C(n,t,e,r,o){var i=r.align,u=r.axis,c=r.direction,a=r.startIndex,s=r.inViewThreshold,l=r.loop,d=r.speed,g=r.dragFree,x=r.slidesToScroll,h=r.skipSnaps,C=r.containScroll,N=t.getBoundingClientRect(),V=e.map((function(n){return n.getBoundingClientRect()})),j=function(n){var t="rtl"===n?-1:1;return{apply:function(n){return n*t}}}(c),H=function(n,t){var e="y"===n?"y":"x";return{scroll:e,cross:"y"===n?"x":"y",startEdge:"y"===e?"top":"rtl"===t?"right":"left",endEdge:"y"===e?"bottom":"rtl"===t?"left":"right",measureSize:function(n){var t=n.width,r=n.height;return"x"===e?t:r}}}(u,c),R=H.measureSize(N),F=function(n){return{measure:function(t){return n*(t/100)}}}(R),q=y(i,R),U=!l&&""!==C,$=function(n,t,e,r,o){var i=n.measureSize,u=n.startEdge,c=n.endEdge,a=function(){if(!o)return 0;var n=e[0];return f(t[u]-n[u])}(),s=function(){if(!o)return 0;var n=window.getComputedStyle(v(r));return parseFloat(n.getPropertyValue("margin-".concat(c)))}(),l=e.map(i),d=e.map((function(n,t,e){var r=!t,o=t===m(e);return r?l[t]+a:o?l[t]+s:e[t+1][u]-n[u]})).map(f);return{slideSizes:l,slideSizesWithGaps:d}}(H,N,V,e,l||""!==C),_=$.slideSizes,G=$.slideSizesWithGaps,J=D(R,G,x),W=function(n,t,e,r,o,i,u){var c,a=n.startEdge,s=n.endEdge,l=i.groupSlides,d=l(r).map((function(n){return v(n)[s]-n[0][a]})).map(f).map(t.measure),p=r.map((function(n){return e[a]-n[a]})).map((function(n){return-f(n)})),g=(c=v(p)-v(o),l(p).map((function(n){return n[0]})).map((function(n,t,e){var r=!t,o=t===m(e);return u&&r?0:u&&o?c:n+d[t]})));return{snaps:p,snapsAligned:g}}(H,q,N,V,G,J,U),X=W.snaps,Y=W.snapsAligned,K=-v(X)+v(G),Q=B(R,K,Y,C).snapsContained,Z=U?Q:Y,nn=function(n,t,e){var r,o;return{limit:(r=t[0],o=v(t),S(e?r-n:o,r))}}(K,Z,l).limit,tn=b(m(Z),a,l),en=tn.clone(),rn=p(e),on=function(n){var t=0;function e(n,e){return function(){n===!!t&&e()}}function r(){t=window.requestAnimationFrame(n)}return{proceed:e(!0,r),start:e(!1,r),stop:e(!0,(function(){window.cancelAnimationFrame(t),t=0}))}}((function(){l||vn.scrollBounds.constrain(vn.dragHandler.pointerDown()),vn.scrollBody.seek(an).update();var n=vn.scrollBody.settle(an);n&&!vn.dragHandler.pointerDown()&&(vn.animation.stop(),o.emit("settle")),n||o.emit("scroll"),l&&(vn.scrollLooper.loop(vn.scrollBody.direction()),vn.slideLooper.loop()),vn.translate.to(cn),vn.animation.proceed()})),un=Z[tn.get()],cn=A(un),an=A(un),sn=I(cn,d,1),fn=T(l,Z,K,nn,an),ln=function(n,t,e,r,o,i){function u(r){var u=r.distance,c=r.index!==t.get();u&&(n.start(),o.add(u)),c&&(e.set(t.get()),t.set(r.index),i.emit("select"))}return{distance:function(n,t){u(r.byDistance(n,t))},index:function(n,e){var o=t.clone().set(n);u(r.byIndex(o.get(),e))}}}(on,tn,en,fn,an,o),dn=z(R,K,_,X,nn,l,s),pn=E(H,j,n,an,function(n){var t,e;function r(n){return"undefined"!=typeof TouchEvent&&n instanceof TouchEvent}function o(n){return n.timeStamp}function i(t,e){var o=e||n.scroll,i="client".concat("x"===o?"X":"Y");return(r(t)?t.touches[0]:t)[i]}return{isTouchEvent:r,pointerDown:function(n){return t=n,e=n,i(n)},pointerMove:function(n){var r=i(n)-i(e),u=o(n)-o(t)>170;return e=n,u&&(t=n),r},pointerUp:function(n){if(!t||!e)return 0;var r=i(e)-i(t),u=o(n)-o(t),c=o(n)-o(e)>170,a=r/u;return u&&!c&&f(a)>.1?a:0},readPoint:i}}(H),cn,on,ln,sn,fn,tn,o,F,l,g,h),vn={containerRect:N,slideRects:V,animation:on,axis:H,direction:j,dragHandler:pn,eventStore:w(),percentOfView:F,index:tn,indexPrevious:en,limit:nn,location:cn,options:r,scrollBody:sn,scrollBounds:M(nn,cn,an,sn,F),scrollLooper:O(K,nn,cn,[cn,an]),scrollProgress:P(nn),scrollSnaps:Z,scrollTarget:fn,scrollTo:ln,slideLooper:L(H,j,R,K,G,Z,dn,cn,e),slidesToScroll:J,slidesInView:dn,slideIndexes:rn,target:an,translate:k(H,j,t)};return vn}var N={align:"center",axis:"x",containScroll:"",direction:"ltr",slidesToScroll:1,breakpoints:{},dragFree:!1,draggable:!0,inViewThreshold:0,loop:!1,skipSnaps:!1,speed:10,startIndex:0,active:!0};function V(){function n(n,t){return x(n,t||{})}return{merge:n,areEqual:function(n,t){return JSON.stringify(g(n.breakpoints||{}))===JSON.stringify(g(t.breakpoints||{}))&&h(n,t)},atMedia:function(t){var e=t.breakpoints||{},r=g(e).filter((function(n){return window.matchMedia(n).matches})).map((function(n){return e[n]})).reduce((function(t,e){return n(t,e)}),{});return n(t,r)}}}function j(n,t,e){var r,o,i,u,c,a=w(),s=V(),f=function(){var n=V(),t=n.atMedia,e=n.areEqual,r=[],o=[];function i(n){var r=t(n.options);return function(){return!e(r,t(n.options))}}return{init:function(n,e){return o=n.map(i),(r=n.filter((function(n){return t(n.options).active}))).forEach((function(n){return n.init(e)})),n.reduce((function(n,t){var e;return Object.assign(n,((e={})[t.name]=t,e))}),{})},destroy:function(){r=r.filter((function(n){return n.destroy()}))},haveChanged:function(){return o.some((function(n){return n()}))}}}(),l=function(){var n={};function t(t){return n[t]||[]}var e={emit:function(n){return t(n).forEach((function(t){return t(n)})),e},off:function(r,o){return n[r]=t(r).filter((function(n){return n!==o})),e},on:function(r,o){return n[r]=t(r).concat([o]),e}};return e}(),d=l.on,p=l.off,v=b,m=!1,g=s.merge(N,j.globalOptions),x=s.merge(g),h=[],y=0;function S(t,e){if(!m){var a,d;if(a="container"in n&&n.container,d="slides"in n&&n.slides,i="root"in n?n.root:n,u=a||i.children[0],c=d||[].slice.call(u.children),g=s.merge(g,t),x=s.atMedia(g),r=C(i,u,c,x,l),y=r.axis.measureSize(i.getBoundingClientRect()),!x.active)return A();if(r.translate.to(r.location),h=e||h,o=f.init(h,B),x.loop){if(!r.slideLooper.canLoop())return A(),S({loop:!1},e);r.slideLooper.loop()}x.draggable&&u.offsetParent&&c.length&&r.dragHandler.addActivationEvents()}}function b(n,t){var e=M();A(),S(s.merge({startIndex:e},n),t),l.emit("reInit")}function A(){r.dragHandler.removeAllEvents(),r.animation.stop(),r.eventStore.removeAll(),r.translate.clear(),r.slideLooper.clear(),f.destroy()}function E(n){var t=r[n?"target":"location"].get(),e=x.loop?"removeOffset":"constrain";return r.slidesInView.check(r.limit[e](t))}function I(n,t,e){x.active&&!m&&(r.scrollBody.useBaseMass().useSpeed(t?100:x.speed),r.scrollTo.index(n,e||0))}function M(){return r.index.get()}var B={canScrollNext:function(){return r.index.clone().add(1).get()!==M()},canScrollPrev:function(){return r.index.clone().add(-1).get()!==M()},clickAllowed:function(){return r.dragHandler.clickAllowed()},containerNode:function(){return u},internalEngine:function(){return r},destroy:function(){m||(m=!0,a.removeAll(),A(),l.emit("destroy"))},off:p,on:d,plugins:function(){return o},previousScrollSnap:function(){return r.indexPrevious.get()},reInit:v,rootNode:function(){return i},scrollNext:function(n){I(r.index.clone().add(1).get(),!0===n,-1)},scrollPrev:function(n){I(r.index.clone().add(-1).get(),!0===n,1)},scrollProgress:function(){return r.scrollProgress.get(r.location.get())},scrollSnapList:function(){return r.scrollSnaps.map(r.scrollProgress.get)},scrollTo:I,selectedScrollSnap:M,slideNodes:function(){return c},slidesInView:E,slidesNotInView:function(n){var t=E(n);return r.slideIndexes.filter((function(n){return-1===t.indexOf(n)}))}};return S(t,e),a.add(window,"resize",(function(){var n=s.atMedia(g),t=!s.areEqual(n,x),e=r.axis.measureSize(i.getBoundingClientRect()),o=y!==e,u=f.haveChanged();(o||t||u)&&b(),l.emit("resize")})),setTimeout((function(){return l.emit("init")}),0),B}j.globalOptions=void 0,j.optionsHandler=V;const H={components:{LvImageCarouselItem:n},props:{loop:{type:Boolean,default:!0},axis:{type:String,default:"x",validator:n=>["x","y"].includes(n)},gap:{type:String,default:".25rem"}},data:()=>({instance:null}),watch:{"$slots.default":{handler(n){n().length>0&&this.createInstance()},immediate:!0}},methods:{createInstance(){if(!this.instance){let n=0;const t=setInterval((()=>{this.$refs.carousel?(this.instance=j(this.$refs.carousel,{loop:this.loop,axis:this.axis}),clearInterval(t)):n<30?n+=1:clearInterval(t)}),100)}}}},R=()=>{u((n=>({c7fcef28:n.gap})))},F=H.setup;H.setup=F?(n,t)=>(R(),F(n,t)):R;const q={class:"lv-image-carousel",ref:"carousel"},U={class:"lv-image-carousel__container"};const $=t(H,[["render",function(n,t,u,c,a,s){return i(),e("div",q,[r("div",U,[o(n.$slots,"default")])],512)}]]);export{$ as default};
