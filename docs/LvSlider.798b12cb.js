import{_ as e,c as t,a as s,h as i,K as o,j as a,l as n,i as d,F as h,b as l,t as r,n as u,g as m,o as c}from"./index.7cfd2803.js";import{u as v}from"./index.03596c51.js";const p={props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Number,default:0},decimals:{type:Number,default:0,validator:e=>e>=0},step:{type:Number,default:1,validator:e=>e>0},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showRange:{type:Boolean,default:!1},showPopover:{type:Boolean,default:!0}},emits:["update:modelValue"],data:()=>({dragging:!1,trackX:0,trackWidth:0,thumbPosition:0}),computed:{classNames(){return{"lv-slider--invalid":this.invalid,"lv-slider--disabled":this.disabled,"lv-slider--loading":this.loading}},parsedValue(){const e=(this.max-this.min)/100*this.thumbPosition+this.min;return parseFloat(e.toFixed(this.decimals))},indicatorRight(){return this.thumbPosition},stepPercentage(){return 100/(this.max-this.min)*this.step},styleObjectIndicator(){return{left:0,right:100-this.indicatorRight+"%"}},styleObjectThumb(){return{left:`${this.thumbPosition}%`}}},watch:{modelValue:{handler(e){this.thumbPosition=e?this.getPositionFromValue(e):100},deep:!0,immediate:!0}},mounted(){this.cacheDimensions()},created(){this.onThumbMouseMoveThrottled=v(this.onThumbMouseMove,25,!1),this.onThumbTouchMoveThrottled=v(this.onThumbTouchMove,25,!1)},methods:{onThumbMouseDown(){this.disabled||this.loading||(this.dragging=!0,this.cacheDimensions(),document.addEventListener("mousemove",this.onThumbMouseMoveThrottled,!1),document.addEventListener("mouseup",this.onMouseUp,!1))},onThumbMouseMove(e){this.thumbPosition=this.getRelativePosition(e.pageX)},onMouseUp(){this.dragging=!1,document.removeEventListener("mousemove",this.onThumbMouseMoveThrottled,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.emitInputEvent()},onThumbTouchStart(){this.disabled||(this.cacheDimensions(),document.addEventListener("touchmove",this.onThumbTouchMoveThrottled),document.addEventListener("touchend",this.onTouchEnd))},onThumbTouchMove(e){e.preventDefault(),this.thumbPosition=this.getRelativePosition(e.touches[0].clientX)},onTouchEnd(){document.removeEventListener("touchmove",this.onThumbTouchMoveThrottled),document.removeEventListener("touchend",this.onTouchEnd),this.emitInputEvent()},emitInputEvent(){this.$emit("update:modelValue",this.parsedValue)},cacheDimensions(){this.trackWidth=this.$refs.track.offsetWidth,this.trackX=this.$refs.track.getBoundingClientRect().left},getPositionFromValue(e){return 100/(this.max-this.min)*e-this.min/(this.max-this.min)*100},getRelativePosition(e){let t=(e-this.trackX)/this.trackWidth*100;return this.step&&(t=Math.round(t/this.stepPercentage)*this.stepPercentage),t=Math.min(Math.max(t,0),100),t}}},b={class:"lv-slider__track"},g={ref:"track",class:"lv-slider__track-boundaries"},T=s("div",{class:"lv-range-slider__thumb-hit-area"},null,-1),_={key:0,class:"lv-slider__range"},M={class:"lv-slider__range-value lv-slider__range-value--primary"},f={class:"lv-slider__range-value lv-slider__range-value--secondary"};const y=e(p,[["render",function(e,v,p,y,k,P){const E=m("lv-popover"),x=m("lv-icon");return c(),t("div",{class:u(["lv-slider",P.classNames])},[s("div",b,[s("div",g,[s("div",{class:"lv-slider__indicator",style:i(P.styleObjectIndicator)},null,4),s("div",{class:"lv-slider__thumb lv-slider__thumb",style:i(P.styleObjectThumb),onMousedown:v[0]||(v[0]=o(((...e)=>P.onThumbMouseDown&&P.onThumbMouseDown(...e)),["prevent"])),onTouchstart:v[1]||(v[1]=(...e)=>P.onThumbTouchStart&&P.onThumbTouchStart(...e))},[p.showPopover?(c(),a(E,{key:0,show:k.dragging,placement:"top",trigger:"manual",padding:".25rem"},{reference:n((()=>[T])),content:n((()=>[l(r(P.parsedValue),1)])),_:1},8,["show"])):d("",!0)],36)],512)]),p.showRange?(c(),t("div",_,[s("div",M,[p.loading?(c(),a(x,{key:0,class:"lv-slider__loader",size:12,name:"loader-2"})):(c(),t(h,{key:1},[l(r(p.min.toFixed(p.decimals)),1)],64))]),s("div",f,[p.loading?(c(),a(x,{key:0,class:"lv-slider__loader",size:12,name:"loader-2"})):(c(),t(h,{key:1},[l(r(p.max.toFixed(p.decimals)),1)],64))])])):d("",!0)],2)}]]);export{y as default};
