import{_ as l,c as e,d as t,i as o,a as s,F as a,k as r,t as n,n as i,o as c,b as u,K as d,r as h,g as v}from"./index.7cfd2803.js";function b(l,e=2,t="floor"){const o=Number.parseInt(`1${new Array(e).fill(0).join().replace(",","")}`,10);return(Math[t](l*o)/o).toFixed(e)}const _={props:{rows:{type:Array,default:()=>[]},columns:{type:Object,default:()=>({})},footerRows:{type:Array,default:()=>[]},footerColumns:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},rowHoverEffect:{type:Boolean,default:!0},hideHead:{type:Boolean,default:!1},hideRowLines:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},noDataText:{type:String,default:"No data available"},groupRowsBy:{type:String,default:null},horizontalScroll:{type:Boolean,default:!0},rowAction:{type:Function,default:null},sort:{type:String,default:null}},computed:{parsedRows(){const l=[];return this.rows.forEach((e=>{const t={};Object.keys(this.columns).forEach((l=>{void 0!==e[l]?t[l]=e[l]:t[l]=null})),this.groupRowsBy&&e[this.groupRowsBy]&&(t[this.groupRowsBy]=e[this.groupRowsBy]),l.push(t)})),l},groupedParsedRows(){if(this.groupRowsBy){const l={};return this.parsedRows.forEach((e=>{l[e[this.groupRowsBy]]||(l[e[this.groupRowsBy]]=[]),l[e[this.groupRowsBy]].push(e)})),l}return!1},hasRows(){return this.rows.length>0},visibleColumnCount(){return Object.keys(this.columns).length},showFoot(){let l=!1;return Object.entries(this.columns).forEach((([,e])=>{(e.totals||e.averages)&&(l=!0)})),l},showTotalsRow(){let l=!1;return Object.entries(this.columns).forEach((([,e])=>{e.totals&&(l=!0)})),l},showAverageRow(){let l=!1;return Object.entries(this.columns).forEach((([,e])=>{e.averages&&(l=!0)})),l},classObject(){return{"lv-table--condensed":!!this.condensed,"lv-table--hide-row-lines":!!this.hideRowLines,"lv-table--loading":!!this.loading,"lv-table--horizontal-scroll":!!this.horizontalScroll,"lv-table--row-hover-effect":!!this.rowHoverEffect,"lv-table--has-row-action":"function"==typeof this.rowAction}}},emits:["update:sort"],methods:{getTotal(l,e){let t=0;return this.rows.forEach((e=>{t+=Number.parseFloat(e[l],10)})),"function"==typeof e?e(t):b(t)},getAverage(l,e){const t=this.getTotal(l)/this.rows.length;return"function"==typeof e?e(t):b(t)},getCellModifiers(l){const e=[];return l.align&&"right"===l.align&&e.push("lv-table__cell--align-right"),l.align&&"center"===l.align&&e.push("lv-table__cell--align-center"),l.fitContent&&e.push("lv-table__cell--fit-content"),l.bold&&e.push("lv-table__cell--bold"),l.italic&&e.push("lv-table__cell--italic"),l.sortable&&e.push("lv-table__cell--sortable"),e},onClickRow(l){if("function"==typeof this.rowAction){const e=JSON.parse(JSON.stringify(this.rows[l]));this.rowAction({row:e,index:l})}},onClickHeadCell(l){l===this.sort?this.$emit("update:sort",`-${l}`):l===this.sort.replace("-","")?this.$emit("update:sort",`${l}`):this.$emit("update:sort",l)}}},p={key:0,class:"lv-table__loading"},y={class:"lv-table__table"},w={key:0,class:"lv-table__table-head"},g={class:"lv-table__row"},f=["onClick"],k={class:"lv-table__cell-container"},m=["colspan"],R=["onClick"],C={key:2,class:"lv-table__table-body"},B={key:0,class:"lv-table__row"},A=["colspan"],$=["onClick"],j={key:3,class:"lv-table__table-foot"},O={key:0,class:"lv-table__row lv-table__row--totals"},E=u(" Total "),T={key:1,class:"lv-table__row lv-table__row--average"},M=u(" Average ");const S=l(_,[["render",function(l,b,_,S,x,F){const H=v("lv-spinner"),N=v("lv-icon");return c(),e("div",{class:i(["lv-table",F.classObject]),role:"table"},[_.loading?(c(),e("div",p,[t(H)])):o("",!0),s("table",y,[_.hideHead?o("",!0):(c(),e("thead",w,[s("tr",g,[(c(!0),e(a,null,r(_.columns,((l,o)=>(c(),e("th",{key:o,class:i(["lv-table__cell",F.getCellModifiers(l)]),onClick:e=>!!l.sortable&&F.onClickHeadCell(o)},[s("div",k,[u(n(void 0!==l.title?l.title:o)+" ",1),t(N,{class:i(["lv-table__sort-icon",{"lv-table__sort-icon--active":_.sort&&o===_.sort.replace("-","")}]),name:_.sort&&o===_.sort.replace("-","")&&_.sort.startsWith("-")?"chevron-up":"chevron-down"},null,8,["name","class"])])],10,f)))),128))])])),_.groupRowsBy?(c(!0),e(a,{key:1},r(F.groupedParsedRows,((t,v,b)=>(c(),e("tbody",{key:b,class:"lv-table__table-body"},[(c(),e("tr",{key:b},[s("td",{colspan:F.visibleColumnCount,class:"lv-table__cell lv-table__cell--bold lv-table__cell--group-title"},n(v),9,m)])),(c(!0),e(a,null,r(t,((t,s)=>(c(),e("tr",{key:`${b}${s}`,class:"lv-table__row",onClick:d((l=>F.onClickRow(s)),["stop"])},[(c(!0),e(a,null,r(t,((s,r)=>(c(),e(a,null,[void 0!==_.columns[r]?(c(),e("td",{key:`${b}${r}`,class:i(["lv-table__cell",F.getCellModifiers(_.columns[r])])},[h(l.$slots,r,{value:s,row:t},(()=>[u(n(s),1)]))],2)):o("",!0)],64)))),256))],8,R)))),128))])))),128)):(c(),e("tbody",C,[F.hasRows?o("",!0):(c(),e("tr",B,[s("td",{class:"lv-table__cell lv-table__cell--no-data",colspan:Object.entries(_.columns).length},n(_.noDataText),9,A)])),(c(!0),e(a,null,r(F.parsedRows,((t,s)=>(c(),e("tr",{key:s,class:"lv-table__row",onClick:d((l=>F.onClickRow(s)),["stop"])},[(c(!0),e(a,null,r(t,((s,r)=>(c(),e(a,null,[void 0!==_.columns[r]?(c(),e("td",{key:r,class:i(["lv-table__cell",F.getCellModifiers(_.columns[r])])},[h(l.$slots,r,{value:s,row:t},(()=>[u(n(s),1)]))],2)):o("",!0)],64)))),256))],8,$)))),128))])),F.showFoot?(c(),e("tfoot",j,[F.showTotalsRow?(c(),e("tr",O,[(c(!0),e(a,null,r(_.columns,((l,t,s)=>(c(),e("td",{key:s,class:i(["lv-table__cell",F.getCellModifiers(l)])},[0===s?(c(),e(a,{key:0},[l.totals?(c(),e(a,{key:0},[u(n(F.getTotal(t,l.totals)),1)],64)):(c(),e(a,{key:1},[E],64))],64)):l.totals?(c(),e(a,{key:1},[u(n(F.getTotal(t,l.totals)),1)],64)):o("",!0)],2)))),128))])):o("",!0),F.showAverageRow?(c(),e("tr",T,[(c(!0),e(a,null,r(_.columns,((l,t,s)=>(c(),e("td",{key:s,class:i(["lv-table__cell",F.getCellModifiers(l)])},[0===s?(c(),e(a,{key:0},[l.averages?(c(),e(a,{key:0},[u(n(F.getAverage(t,l.averages)),1)],64)):(c(),e(a,{key:1},[M],64))],64)):l.averages?(c(),e(a,{key:1},[u(n(F.getAverage(t,l.averages)),1)],64)):o("",!0)],2)))),128))])):o("",!0),(c(!0),e(a,null,r(_.footerRows,((t,s)=>(c(),e("tr",{key:s,class:"lv-table__row"},[(c(!0),e(a,null,r(t,((s,r)=>(c(),e(a,null,[void 0!==_.columns[r]?(c(),e("td",{key:r,class:i(["lv-table__cell",F.getCellModifiers(_.columns[r])])},[h(l.$slots,r,{value:s,row:t},(()=>[u(n(s),1)]))],2)):o("",!0)],64)))),256))])))),128))])):o("",!0)])],2)}]]);export{S as default};
