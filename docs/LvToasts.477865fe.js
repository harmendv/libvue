import r from"./LvToast.d5bc41d8.js";import{_ as u,j as a,d as p,l as m,S as h,T as k,o as s,c as _,k as f,F as C,g as v}from"./index.7cfd2803.js";const T={components:{LvToast:r},props:{decay:{type:Number,default:3e3},max:{type:Number,default:5}},data(){return{toasts:{},latestUid:0}},watch:{toasts:{handler(t){if(Object.entries(t).length>this.max){const o=Math.min.apply(Math,Object.keys(t).map(n=>Number.parseInt(n,10)));delete this.toasts[o]}},immediate:!0,deep:!0}},mounted(){this.libvue.eventBus.$on("toast",this.addToastHandler)},unmounted(){this.libvue.eventBus.$off("toast",this.addToastHandler)},methods:{addToastHandler(t){const o=Number.parseInt(this.latestUid.toString(),10);this.toasts[o]={...t,uid:o},setTimeout(()=>{delete this.toasts[o]},this.decay),this.latestUid+=1},onClickToast(t){t.onClick&&typeof t.onClick=="function"&&t.onClick({close:()=>this.deleteToast(t),toast:t})},onClickButton(t){t.onClickButton&&typeof t.onClickButton=="function"&&t.onClickButton({close:()=>this.deleteToast(t),toast:t})},deleteToast(t){delete this.toasts[t.uid]}}};function b(t,o,n,y,l,i){const c=v("lv-toast");return s(),a(k,{to:"body"},[p(h,{name:"toasts",tag:"div",class:"lv-toasts"},{default:m(()=>[(s(!0),_(C,null,f(l.toasts,e=>(s(),a(c,{key:e.uid,description:e.description,title:e.title,button:e.button,icon:e.icon,onClick:d=>i.onClickToast(e),onClickButton:d=>i.onClickButton(e)},null,8,["description","title","button","icon","onClick","onClickButton"]))),128))]),_:1})])}const g=u(T,[["render",b]]);export{g as default};
