import{_ as f,o as n,c as l,i as s,B as r,C as T,p as u,F as h,q as m,v as c,z as b,s as p}from"./index.608cace3.js";import{u as v}from"./index.242b58c6.js";const M={props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Number,default:0},decimals:{type:Number,default:0,validator(e){return e>=0}},step:{type:Number,default:1,validator(e){return e>0}},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:modelValue"],data(){return{trackX:0,trackWidth:0,thumbPosition:0}},computed:{classNames(){return{"lv-slider--invalid":this.invalid,"lv-slider--disabled":this.disabled,"lv-slider--loading":this.loading}},parsedValue(){const e=(this.max-this.min)/100*this.thumbPosition+this.min;return parseFloat(e.toFixed(this.decimals))},indicatorRight(){return this.thumbPosition},stepPercentage(){return 100/(this.max-this.min)*this.step}},watch:{modelValue:{handler(e){this.thumbPosition=e?this.getPositionFromValue(e):100},deep:!0,immediate:!0}},mounted(){this.cacheDimensions()},created(){this.onThumbMouseMoveThrottled=v(this.onThumbMouseMove,25,!1),this.onThumbTouchMoveThrottled=v(this.onThumbTouchMove,25,!1)},methods:{onThumbMouseDown(){this.disabled||this.loading||(this.cacheDimensions(),document.addEventListener("mousemove",this.onThumbMouseMoveThrottled,!1),document.addEventListener("mouseup",this.onMouseUp,!1))},onThumbMouseMove(e){this.thumbPosition=this.getRelativePosition(e.pageX)},onMouseUp(){document.removeEventListener("mousemove",this.onThumbMouseMoveThrottled,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.emitInputEvent()},onThumbTouchStart(){this.disabled||(this.cacheDimensions(),document.addEventListener("touchmove",this.onThumbTouchMoveThrottled),document.addEventListener("touchend",this.onTouchEnd))},onThumbTouchMove(e){e.preventDefault(),this.thumbPosition=this.getRelativePosition(e.touches[0].clientX)},onTouchEnd(){document.removeEventListener("touchmove",this.onThumbTouchMoveThrottled),document.removeEventListener("touchend",this.onTouchEnd),this.emitInputEvent()},emitInputEvent(){this.$emit("update:modelValue",this.parsedValue)},cacheDimensions(){this.trackWidth=this.$refs.track.offsetWidth,this.trackX=this.$refs.track.getBoundingClientRect().left},getPositionFromValue(e){return 100/(this.max-this.min)*e-this.min/(this.max-this.min)*100},getRelativePosition(e){let t=(e-this.trackX)/this.trackWidth*100;return this.step&&(t=Math.round(t/this.stepPercentage)*this.stepPercentage),t=Math.min(Math.max(t,0),100),t}}},g={class:"lv-slider__track"},y={ref:"track",class:"lv-slider__track-limits"},k={class:"lv-slider__amounts"},x={class:"lv-slider__amount lv-slider__amount--primary"},E={class:"lv-slider__amount lv-slider__amount--secondary"};function P(e,o,t,L,_,i){const d=p("lv-icon");return n(),l("div",{class:b(["lv-slider",i.classNames])},[s("div",g,[s("div",y,[s("div",{class:"lv-slider__indicator",style:r({left:0,right:100-i.indicatorRight+"%"})},null,4),s("div",{class:"lv-slider__thumb lv-slider__thumb",style:r({left:_.thumbPosition+"%"}),onMousedown:o[0]||(o[0]=T((...a)=>i.onThumbMouseDown&&i.onThumbMouseDown(...a),["prevent"])),onTouchstart:o[1]||(o[1]=(...a)=>i.onThumbTouchStart&&i.onThumbTouchStart(...a))},null,36)],512)]),s("div",k,[s("div",x,[t.loading?(n(),u(d,{key:0,class:"lv-slider__loader",size:12,name:"loader-2"})):(n(),l(h,{key:1},[m(c(t.min.toFixed(t.decimals)),1)],64))]),s("div",E,[t.loading?(n(),u(d,{key:0,class:"lv-slider__loader",size:12,name:"loader-2"})):(n(),l(h,{key:1},[m(c(t.max.toFixed(t.decimals)),1)],64))])])],2)}const D=f(M,[["render",P]]);export{D as default};
