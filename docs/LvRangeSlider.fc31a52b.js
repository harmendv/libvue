import{_ as e,c as t,a as o,h as i,j as s,l as r,i as a,F as n,b as d,t as h,n as l,g as c,o as u}from"./index.7cfd2803.js";import{u as m}from"./index.03596c51.js";const y={props:{min:{type:Number,default:0},max:{type:Number,default:100},modelValue:{type:Object,default:()=>({})},decimals:{type:Number,default:0,validator:e=>e>=0},step:{type:Number,default:1,validator:e=>e>0},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},showRange:{type:Boolean,default:!1},showPopover:{type:Boolean,default:!0}},emits:["update:modelValue"],data:()=>({trackX:0,trackWidth:0,primaryPosition:0,secondaryPosition:0,draggingPrimary:!1,draggingSecondary:!1}),computed:{classNames(){return{"lv-range-slider--invalid":this.invalid,"lv-range-slider--disabled":this.disabled,"lv-range-slider--loading":this.loading}},primaryValue(){const e=(this.max-this.min)/100*this.primaryPosition+this.min;return parseFloat(e.toFixed(this.decimals))},secondaryValue(){const e=(this.max-this.min)/100*this.secondaryPosition+this.min;return parseFloat(e.toFixed(this.decimals))},indicatorLeft(){return this.primaryPosition<=this.secondaryPosition?this.primaryPosition:this.secondaryPosition},indicatorRight(){return this.primaryPosition>=this.secondaryPosition?this.primaryPosition:this.secondaryPosition},stepPercentage(){return 100/(this.max-this.min)*this.step},styleObjectIndicator(){return{left:`${this.indicatorLeft}%`,right:100-this.indicatorRight+"%"}},styleObjectThumbPrimary(){return{left:`${this.primaryPosition}%`}},styleObjectThumbSecondary(){return{left:`${this.secondaryPosition}%`}}},watch:{modelValue:{handler(e){this.primaryPosition=e.from?this.getPositionFromValue(e.from):0,this.secondaryPosition=e.to?this.getPositionFromValue(e.to):100},deep:!0,immediate:!0}},mounted(){this.cacheDimensions()},created(){this.onPrimaryMouseMoveThrottled=m(this.onPrimaryMouseMove,24),this.onSecondaryMouseMoveThrottled=m(this.onSecondaryMouseMove,24),this.onPrimaryTouchMoveThrottled=m(this.onPrimaryTouchMove,24),this.onSecondaryTouchMoveThrottled=m(this.onSecondaryTouchMove,24)},methods:{onPrimaryMouseDown(e){this.draggingPrimary=!0,e.preventDefault(),this.disabled||this.loading||(this.cacheDimensions(),document.addEventListener("mousemove",this.onPrimaryMouseMoveThrottled,!1),document.addEventListener("mouseup",this.onMouseUp,!1))},onPrimaryMouseMove(e){this.primaryPosition=this.getRelativePosition(e.pageX)},onSecondaryMouseDown(e){this.draggingSecondary=!0,e.preventDefault(),this.disabled||this.loading||(this.cacheDimensions(),document.addEventListener("mousemove",this.onSecondaryMouseMoveThrottled,!1),document.addEventListener("mouseup",this.onMouseUp,!1))},onSecondaryMouseMove(e){this.secondaryPosition=this.getRelativePosition(e.pageX)},onMouseUp(){this.draggingPrimary=!1,this.draggingSecondary=!1,document.removeEventListener("mousemove",this.onPrimaryMouseMoveThrottled,!1),document.removeEventListener("mousemove",this.onSecondaryMouseMoveThrottled,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.emitInputEvent()},onPrimaryTouchStart(){this.disabled||(this.cacheDimensions(),document.addEventListener("touchmove",this.onPrimaryTouchMoveThrottled),document.addEventListener("touchend",this.onTouchEnd))},onPrimaryTouchMove(e){e.preventDefault(),this.primaryPosition=this.getRelativePosition(e.touches[0].clientX)},onSecondaryTouchStart(){this.disabled||(this.cacheDimensions(),document.addEventListener("touchmove",this.onSecondaryTouchMoveThrottled),document.addEventListener("touchend",this.onTouchEnd))},onSecondaryTouchMove(e){e.preventDefault(),this.secondaryPosition=this.getRelativePosition(e.touches[0].clientX)},onTouchEnd(){document.removeEventListener("touchmove",this.onPrimaryTouchMoveThrottled),document.removeEventListener("touchmove",this.onSecondaryTouchMoveThrottled),document.removeEventListener("touchend",this.onTouchEnd),this.emitInputEvent()},emitInputEvent(){const e=this.primaryValue<=this.secondaryValue?this.primaryValue:this.secondaryValue,t=this.primaryValue<=this.secondaryValue?this.secondaryValue:this.primaryValue;this.$emit("update:modelValue",{from:e,to:t})},cacheDimensions(){this.trackWidth=this.$refs.track.offsetWidth,this.trackX=this.$refs.track.getBoundingClientRect().left},getPositionFromValue(e){return 100/(this.max-this.min)*e-this.min/(this.max-this.min)*100},getRelativePosition(e){let t=(e-this.trackX)/this.trackWidth*100;return this.step&&(t=Math.round(t/this.stepPercentage)*this.stepPercentage),t=Math.min(Math.max(t,0),100),t}}},v={class:"lv-range-slider__track"},g={ref:"track",class:"lv-range-slider__track-boundaries"},p=o("div",{class:"lv-range-slider__thumb-hit-area"},null,-1),P=o("div",{class:"lv-range-slider__thumb-hit-area"},null,-1),M={key:0,class:"lv-range-slider__range"},T={class:"lv-range-slider__range-value lv-range-slider__range-value--primary"},f={class:"lv-range-slider__range-value lv-range-slider__range-value--secondary"};const _=e(y,[["render",function(e,m,y,_,b,S){const E=c("lv-popover"),V=c("lv-icon");return u(),t("div",{class:l(["lv-range-slider",S.classNames])},[o("div",v,[o("div",g,[o("div",{class:"lv-range-slider__indicator",style:i(S.styleObjectIndicator)},null,4),o("div",{ref:"primary",class:"lv-range-slider__thumb lv-range-slider__thumb--primary",style:i(S.styleObjectThumbPrimary),onMousedown:m[0]||(m[0]=(...e)=>S.onPrimaryMouseDown&&S.onPrimaryMouseDown(...e)),onTouchstart:m[1]||(m[1]=(...e)=>S.onPrimaryTouchStart&&S.onPrimaryTouchStart(...e))},[y.showPopover?(u(),s(E,{key:0,show:b.draggingPrimary,placement:"top",trigger:"manual",padding:".25rem"},{reference:r((()=>[p])),content:r((()=>[d(h(S.primaryValue),1)])),_:1},8,["show"])):a("",!0)],36),o("div",{ref:"secondary",class:"lv-range-slider__thumb lv-range-slider__thumb--secondary",style:i(S.styleObjectThumbSecondary),onMousedown:m[2]||(m[2]=(...e)=>S.onSecondaryMouseDown&&S.onSecondaryMouseDown(...e)),onTouchstart:m[3]||(m[3]=(...e)=>S.onSecondaryTouchStart&&S.onSecondaryTouchStart(...e))},[y.showPopover?(u(),s(E,{key:0,show:b.draggingSecondary,placement:"top",trigger:"manual",padding:".25rem"},{reference:r((()=>[P])),content:r((()=>[d(h(S.secondaryValue),1)])),_:1},8,["show"])):a("",!0)],36)],512)]),y.showRange?(u(),t("div",M,[o("div",T,[y.loading?(u(),s(V,{key:0,class:"lv-range-slider__loader",size:12,name:"loader-2"})):(u(),t(n,{key:1},[d(h(S.primaryValue.toFixed(y.decimals)),1)],64))]),o("div",f,[y.loading?(u(),s(V,{key:0,class:"lv-range-slider__loader",size:12,name:"loader-2"})):(u(),t(n,{key:1},[d(h(S.secondaryValue.toFixed(y.decimals)),1)],64))])])):a("",!0)],2)}]]);export{_ as default};
