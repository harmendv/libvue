import{o as k}from"./index.3f944e4d.js";import{_ as V,I as r,c as i,a as p,r as d,f as u,J as v,t as c,F as w,k as g,i as _,j as b,w as f,d as x,l as O,s as S,n as C,o as s,b as m,K as B,v as T,g as N}from"./index.0b0776f9.js";import{p as j}from"./propSizeMixin.c60c30ad.js";import"./index.2ca69b14.js";const z={provide(){return{value:r(()=>this.value),multiple:r(()=>this.multiple),searchable:r(()=>this.searchable),clearable:r(()=>this.clearable),searchValue:r(()=>this.search),visibleOptions:r(()=>this.visibleOptions)}},mixins:[j()],props:{value:{type:[Object,Array],default:null},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:"Choose an option"},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},teleportTarget:{type:String,default:"body"}},data(){return{dropdownVisible:!1,focusedOptionIndex:null,search:null,visibleOptions:null,mounted:!1}},computed:{focusTrapOptions(){return{immediate:!0,escapeDeactivates:!1,fallbackFocus:document.body}},hasValue(){return!!(this.multiple&&this.value.length>0||!this.multiple&&this.value)},classObject(){return{[`lv-select--size-${this.size}`]:!0,"lv-select--disabled":!!this.disabled||!!this.loading,"lv-select--loading":!!this.loading}}},watch:{search(o){!this.dropdownVisible&&o&&(this.dropdownVisible=!0)},value(o){!this.multiple&&this.dropdownVisible&&(this.dropdownVisible=!1),o&&this.search&&(this.search=null)}},mounted(){this.mounted=!0,this.visibleOptions=this.getVisibleOptions(),k(this.$refs.select,()=>{this.dropdownVisible=!1})},updated(){this.$nextTick(()=>{this.visibleOptions=this.getVisibleOptions()})},methods:{getVisibleOptions(){return this.$el.querySelectorAll(".lv-select-option").length},onClickSelection(){this.dropdownVisible=!this.dropdownVisible},onEscape(){this.dropdownVisible=!1}}},E=["aria-expanded"],K={key:0,class:"lv-select__value"},D=["placeholder"],F={key:2,class:"lv-select__placeholder"},L={key:1,class:"lv-select__value"},M=["placeholder"],A={key:2,class:"lv-select__placeholder"},I={class:"lv-select__dropdown",role:"listbox"},U={key:0,class:"lv-select__no-options"};function q(o,t,e,J,n,a){const h=N("lv-icon");return s(),i("div",{ref:"select",class:C(["lv-select",a.classObject]),role:"combobox","aria-expanded":n.dropdownVisible,"aria-haspopup":"listbox",onKeydown:t[4]||(t[4]=f((...l)=>a.onEscape&&a.onEscape(...l),["esc"]))},[p("div",{ref:"combobox",class:"lv-select__input",tabindex:"0",onClick:t[2]||(t[2]=(...l)=>a.onClickSelection&&a.onClickSelection(...l)),onKeydown:t[3]||(t[3]=f(B((...l)=>a.onClickSelection&&a.onClickSelection(...l),["prevent"]),["enter","space"]))},[e.multiple?e.multiple?(s(),i("div",L,[a.hasValue?(s(!0),i(w,{key:0},g(e.value,(l,y)=>(s(),i("span",{key:y,class:"lv-select__value-item"},[d(o.$slots,"value",{values:e.value,value:l},()=>[m(c(l.label),1)])]))),128)):e.searchable?u((s(),i("input",{key:1,"onUpdate:modelValue":t[1]||(t[1]=l=>n.search=l),class:"lv-select__search",type:"text",placeholder:e.placeholder},null,8,M)),[[v,n.search]]):(s(),i("div",A,c(e.placeholder),1))])):_("",!0):(s(),i("div",K,[a.hasValue?d(o.$slots,"value",{key:0,value:e.value},()=>[m(c(e.value.label),1)]):e.searchable?u((s(),i("input",{key:1,"onUpdate:modelValue":t[0]||(t[0]=l=>n.search=l),class:"lv-select__search",type:"text",placeholder:e.placeholder},null,8,D)),[[v,n.search]]):(s(),i("div",F,c(e.placeholder),1))])),e.loading?(s(),b(h,{key:2,class:"lv-select__loading",name:"loader-2"})):(s(),b(h,{key:3,class:"lv-select__icon",name:"chevron-down"}))],544),x(S,{name:"dropdown"},{default:O(()=>[u(p("div",I,[d(o.$slots,"default"),n.visibleOptions?_("",!0):(s(),i("div",U,"No options found"))],512),[[T,n.dropdownVisible]])]),_:3})],42,E)}const R=V(z,[["render",q]]);export{R as default};
