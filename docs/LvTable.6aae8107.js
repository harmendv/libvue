import{_ as j,c as t,d as C,i as d,a as g,F as n,k as h,t as f,n as b,o as l,b as v,K as p,r as k,g as B}from"./index.bd2d1d7a.js";function A(e,s=2,a="floor"){const _=Number.parseInt(`1${new Array(s).fill(0).join().replace(",","")}`,10);return(Math[a](e*_)/_).toFixed(s)}const E={props:{rows:{type:Array,default:()=>[]},columns:{type:Object,default:()=>({})},footerRows:{type:Array,default:()=>[]},footerColumns:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},rowHoverEffect:{type:Boolean,default:!0},hideHead:{type:Boolean,default:!1},hideRowLines:{type:Boolean,default:!1},condensed:{type:Boolean,default:!1},noDataText:{type:String,default:"No data available"},groupRowsBy:{type:String,default:null},horizontalScroll:{type:Boolean,default:!0},rowAction:{type:Function,default:null},sort:{type:String,default:null}},computed:{parsedRows(){const e=[];return this.rows.forEach(s=>{const a={};Object.keys(this.columns).forEach(_=>{typeof s[_]<"u"?a[_]=s[_]:a[_]=null}),this.groupRowsBy&&s[this.groupRowsBy]&&(a[this.groupRowsBy]=s[this.groupRowsBy]),e.push(a)}),e},groupedParsedRows(){if(this.groupRowsBy){const e={};return this.parsedRows.forEach(s=>{e[s[this.groupRowsBy]]||(e[s[this.groupRowsBy]]=[]),e[s[this.groupRowsBy]].push(s)}),e}return!1},hasRows(){return this.rows.length>0},visibleColumnCount(){return Object.keys(this.columns).length},showFoot(){let e=!1;return Object.entries(this.columns).forEach(([,s])=>{(s.totals||s.averages)&&(e=!0)}),e},showTotalsRow(){let e=!1;return Object.entries(this.columns).forEach(([,s])=>{s.totals&&(e=!0)}),e},showAverageRow(){let e=!1;return Object.entries(this.columns).forEach(([,s])=>{s.averages&&(e=!0)}),e},classObject(){return{"lv-table--condensed":!!this.condensed,"lv-table--hide-row-lines":!!this.hideRowLines,"lv-table--loading":!!this.loading,"lv-table--horizontal-scroll":!!this.horizontalScroll,"lv-table--row-hover-effect":!!this.rowHoverEffect,"lv-table--has-row-action":typeof this.rowAction=="function"}}},emits:["update:sort"],methods:{getTotal(e,s){let a=0;return this.rows.forEach(_=>{a+=Number.parseFloat(_[e],10)}),typeof s=="function"?s(a):A(a)},getAverage(e,s){const _=this.getTotal(e)/this.rows.length;return typeof s=="function"?s(_):A(_)},getCellModifiers(e){const s=[];return e.align&&e.align==="right"&&s.push("lv-table__cell--align-right"),e.align&&e.align==="center"&&s.push("lv-table__cell--align-center"),e.fitContent&&s.push("lv-table__cell--fit-content"),e.bold&&s.push("lv-table__cell--bold"),e.italic&&s.push("lv-table__cell--italic"),e.sortable&&s.push("lv-table__cell--sortable"),s},onClickRow(e){if(typeof this.rowAction=="function"){const s=JSON.parse(JSON.stringify(this.rows[e]));this.rowAction({row:s,index:e})}},onClickHeadCell(e){e===this.sort?this.$emit("update:sort",`-${e}`):e===this.sort.replace("-","")?this.$emit("update:sort",`${e}`):this.$emit("update:sort",e)}}},N={key:0,class:"lv-table__loading"},M={class:"lv-table__table"},S={key:0,class:"lv-table__table-head"},m={class:"lv-table__row"},F=["onClick"],H={class:"lv-table__cell-container"},L=["colspan"],z=["onClick"],V={key:2,class:"lv-table__table-body"},J={key:0,class:"lv-table__row"},P=["colspan"],W=["onClick"],q={key:3,class:"lv-table__table-foot"},G={key:0,class:"lv-table__row lv-table__row--totals"},Q=v(" Total "),U={key:1,class:"lv-table__row lv-table__row--average"},X=v(" Average ");function Y(e,s,a,_,Z,r){const T=B("lv-spinner"),O=B("lv-icon");return l(),t("div",{class:b(["lv-table",r.classObject]),role:"table"},[a.loading?(l(),t("div",N,[C(T)])):d("",!0),g("table",M,[a.hideHead?d("",!0):(l(),t("thead",S,[g("tr",m,[(l(!0),t(n,null,h(a.columns,(o,i)=>(l(),t("th",{key:i,class:b(["lv-table__cell",r.getCellModifiers(o)]),onClick:c=>o.sortable?r.onClickHeadCell(i):!1},[g("div",H,[v(f(typeof o.title<"u"?o.title:i)+" ",1),C(O,{class:b(["lv-table__sort-icon",{"lv-table__sort-icon--active":a.sort&&i===a.sort.replace("-","")}]),name:a.sort&&i===a.sort.replace("-","")&&a.sort.startsWith("-")?"chevron-up":"chevron-down"},null,8,["name","class"])])],10,F))),128))])])),a.groupRowsBy?(l(!0),t(n,{key:1},h(r.groupedParsedRows,(o,i,c)=>(l(),t("tbody",{key:c,class:"lv-table__table-body"},[(l(),t("tr",{key:c},[g("td",{colspan:r.visibleColumnCount,class:"lv-table__cell lv-table__cell--bold lv-table__cell--group-title"},f(i),9,L)])),(l(!0),t(n,null,h(o,(u,R)=>(l(),t("tr",{key:`${c}${R}`,class:"lv-table__row",onClick:p(w=>r.onClickRow(R),["stop"])},[(l(!0),t(n,null,h(u,(w,y)=>(l(),t(n,null,[typeof a.columns[y]<"u"?(l(),t("td",{key:`${c}${y}`,class:b(["lv-table__cell",r.getCellModifiers(a.columns[y])])},[k(e.$slots,y,{value:w,row:u},()=>[v(f(w),1)])],2)):d("",!0)],64))),256))],8,z))),128))]))),128)):(l(),t("tbody",V,[r.hasRows?d("",!0):(l(),t("tr",J,[g("td",{class:"lv-table__cell lv-table__cell--no-data",colspan:Object.entries(a.columns).length},f(a.noDataText),9,P)])),(l(!0),t(n,null,h(r.parsedRows,(o,i)=>(l(),t("tr",{key:i,class:"lv-table__row",onClick:p(c=>r.onClickRow(i),["stop"])},[(l(!0),t(n,null,h(o,(c,u)=>(l(),t(n,null,[typeof a.columns[u]<"u"?(l(),t("td",{key:u,class:b(["lv-table__cell",r.getCellModifiers(a.columns[u])])},[k(e.$slots,u,{value:c,row:o},()=>[v(f(c),1)])],2)):d("",!0)],64))),256))],8,W))),128))])),r.showFoot?(l(),t("tfoot",q,[r.showTotalsRow?(l(),t("tr",G,[(l(!0),t(n,null,h(a.columns,(o,i,c)=>(l(),t("td",{key:c,class:b(["lv-table__cell",r.getCellModifiers(o)])},[c===0?(l(),t(n,{key:0},[o.totals?(l(),t(n,{key:0},[v(f(r.getTotal(i,o.totals)),1)],64)):(l(),t(n,{key:1},[Q],64))],64)):o.totals?(l(),t(n,{key:1},[v(f(r.getTotal(i,o.totals)),1)],64)):d("",!0)],2))),128))])):d("",!0),r.showAverageRow?(l(),t("tr",U,[(l(!0),t(n,null,h(a.columns,(o,i,c)=>(l(),t("td",{key:c,class:b(["lv-table__cell",r.getCellModifiers(o)])},[c===0?(l(),t(n,{key:0},[o.averages?(l(),t(n,{key:0},[v(f(r.getAverage(i,o.averages)),1)],64)):(l(),t(n,{key:1},[X],64))],64)):o.averages?(l(),t(n,{key:1},[v(f(r.getAverage(i,o.averages)),1)],64)):d("",!0)],2))),128))])):d("",!0),(l(!0),t(n,null,h(a.footerRows,(o,i)=>(l(),t("tr",{key:i,class:"lv-table__row"},[(l(!0),t(n,null,h(o,(c,u)=>(l(),t(n,null,[typeof a.columns[u]<"u"?(l(),t("td",{key:u,class:b(["lv-table__cell",r.getCellModifiers(a.columns[u])])},[k(e.$slots,u,{value:c,row:o},()=>[v(f(c),1)])],2)):d("",!0)],64))),256))]))),128))])):d("",!0)])],2)}const D=j(E,[["render",Y]]);export{D as default};
